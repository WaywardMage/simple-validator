(function(a){function f(){var b=a(this);return b.is("input, textarea, select")?b.is("select")?b.find("option:selected").val():b.val():null}function g(){var b=a(this),c=(b.data("validators")||"").split(/,?\s+/),d=!0;for(var g in c){var h=c[g];if(!e[h])continue;var i=a.proxy(f,this)(),j=a.proxy(e[h],this)(i),k=b.data(h.toLowerCase()+"-msg");if(j)return k||j}return null}function h(b,c,d){a(d).remove()}function i(b,c,d,e,f){e&&a(e).remove(),a(c).after(f)}function j(b,c){var d=a(b).next(".validation-error-msg"),e=d.length>0?d[0]:null,f=a(this);f.removeClass("validation-error"),f.trigger("hideerror",[b,e])}function k(c,d){var e=(b||"<span>%s</span>").replace(/%s/,d),f=a(c).next(".validation-error-msg"),g=f.length>0?f[0]:null,h=a(e);h.addClass("validation-error-msg");var i=a(this);i.addClass("validation-error"),i.trigger("showerror",[c,d,g,h[0]])}function l(b){var c,d=a(this);d.data("error-after")?c=a(d.data("error-after")).first():d.data("error-after-local")?c=a(d.data("error-after-local"),d).first():d.data("error-after-closest")?c=d.closest(d.data("error-after-closest")).first():d.data("error-after-sibling")?c=d.siblings(d.data("error-after-sibling")).first():c=d,b?a.proxy(k,this)(c[0],b):a.proxy(j,this)(c[0],b)}function m(b){var c=a(this);if(!b&&c.is("input, textarea, select")&&!c.data("validate-activated")&&!a.proxy(f,this)())return;c.data("validate-activated",!0);var d=a.proxy(g,this)();return a.proxy(l,this)(d),typeof d=="undefined"||d===null}function n(){a(this).find("[data-validators]").each(function(){a(this).removeData("validate-activated"),a.proxy(l,this)()})}function o(b){var c=a(this),d=!0,e=b?".validation-error":"[data-validators]",f=c.find(e);return a.proxy(n,this)(),f.each(function(){d=a.proxy(m,this)(!0)&&d}),d}function p(){var b=a(this),c=b.data("triggers-container"),d=/^(true|yes)$/i.test(b.data("triggers-container-is-global")),e=d?a(c):b.closest(c);if(e.length<1)return;e.hasClass("validate")?a.proxy(o,e[0])():a.proxy(m,e[0])(!0)}function q(b){var c=this,d=a(this),e=d.data("validation-group"),f=d.closest(".validate"),g=d.closest(".validate").find("[data-validators]").filter(function(){return this!==c&&a(this).data("validation-group")===e}),h=g.filter(function(){return a(this).is("input, select, textarea")?a.proxy(m,this)(!0):a.proxy(o,this)()});(!b||h.length!==g.length)&&d.closest(".control-group").addClass("error")}function r(){var b=a(this);if(!b.is("[data-validators]")){b.is("[data-triggers-container]")&&a.proxy(p,this)();return}if(b.is("input, select, textarea")){var c=b.is("input")?b.val():b.find("option:selected").val();if(!c&&b.data("validate-activate"))return}var d=a.proxy(m,this)();b.is("[data-validation-group]")&&a.proxy(q,this)(d)}function s(b){if(!a.proxy(o,this)())return b.preventDefault(),b.stopImmediatePropagation(),!1;var c=a.Event("success");return a(this).trigger(c),c.isDefaultPrevented()&&b.preventDefault(),c.isPropagationStopped()&&b.stopPropagation(),c.isImmediatePropagationStopped()&&b.stopImmediatePropagation(),c.result}function t(a,b){if(!a)return;if(typeof a=="object"){var c=a;for(var d in c)e.stockNames.indexOf(d)<0&&(e[d]=c[d])}else b&&e.stockNames.indexOf(a)<0&&(e[a]=b)}var b=null,c=/^[0-9a-z._%+-]+@[0-9a-z.-]+\.[a-z]{2,6}$/i,d=new RegExp("^https?://[^.]+?(.[^.]+?)*$","i"),e={required:function(a){return a?null:"Required"},stringlength:function(b){var c=a(this);if(b){var d=parseInt(c.data("stringlength-min"),10);isNaN(d)&&(d=null);var e=parseInt(c.data("stringlength-max"),10);isNaN(e)&&(e=null);if(d>0&&e>0&&(b.length<d||b.length>e))return"Must be between "+d.toString()+" and "+e.toString()+" characters long.";if(d>0&&b.length<d)return"Must be "+d.toString()+" characters or more.";if(e>0&&b.length>e)return"Must be "+e.toString()+" characters or less."}return null},number:function(b){var c=a(this);if(!b)return null;var d=parseInt(b,10);if(isNaN(d))return"Not a number.";var e=parseInt(c.data("number-min"),10);isNaN(e)&&(e=null);var f=parseInt(c.data("number-max"),10);return isNaN(f)&&(f=null),e>0&&f>0&&(d<e||d>f)?"Must be between "+e.toString()+" and "+f.toString()+".":e>0&&d<e?"Must be "+e.toString()+" or greater.":f>0&&d>f?"Must be "+f.toString()+" or less.":null},regex:function(b){var c=a(this).data("regex-pattern"),d=a(this).data("regex-case-sensitive");if(c&&b){var e=new RegExp(c,d?"":"i");if(!e.test(b))return"Invalid value."}return null},match:function(b){var c=a(this).data("match-target"),d=c?a(c):null;return d&&d.length>0&&b!==d.val()?"Values do not match.":null},email:function(a){return!a||c.test(a)?null:"Not a valid email address."},url:function(a){return!a||d.test(a)?null:"Not a valid URL."}};a(document).ready(function(){var c=[];for(var d in e)c.push(d);e.stockNames=c,a(document).on("submit.validate","form.validate",s),a(document).on("blur.validate",'.validate input[type!="hidden"], .validate select, .validate textarea',r),a(document).on("showerror.validate",".validate [data-validators]",i),a(document).on("hideerror.validate",".validate [data-validators]",h),a.validator={addCustomValidators:function(){var a=Array.prototype.slice.call(arguments,0);t.apply(this,a)},setCustomTemplate:function(c){b=c?c:_defaultTemplate,a(".validate").each(function(){a.proxy(o,this)(!0)})},showerror:function(b){a(document).off("showerror.validate"),a(document).on("showerror.validate",".validate [data-validators]",b)},hideerror:function(b){a(document).off("hideerror.validate"),a(document).on("hideerror.validate",".validate [data-validators]",b)}},a.fn.validator=function(b){var c=Array.prototype.slice.call(arguments,1),d=!0,e=this.hasClass("validate");return this.each(function(){switch(b.toLowerCase()){case"validate":d=e?a.proxy(o,this)()&&d:a.proxy(m,this)();break;case"success":c.length>0&&typeof c[0]=="function"&&a(this).on("success.validate",c[0]);break;case"reset":e?a.proxy(n,this)():a.proxy(l,this)(null);break;case"showerror":if(c.length>0&&typeof c[0]=="function"){var f=c[0];a(this).off("showerror.validate"),a(this).on("showerror.validate",function(a,b,c,d,e){return f(a,b,c,d,e),a.stopImmediatePropagation(),!1})}break;case"hideerror":if(c.length>0&&typeof c[0]=="function"){var f=c[0];a(this).off("hideerror.validate"),a(this).on("hideerror.validate",function(a,b,d){return c[0](a,b,d),a.stopImmediatePropagation(),!1})}}}),d}})})(jQuery);